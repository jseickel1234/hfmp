<!doctype html>
<title>HFMP</title>
<h1>HFMP is live âœ…</h1>
<p>You can now Add this page to Home Screen.</p>
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>HFMP â€” Health Tracker</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<style>
  :root{--bg:#0b0c10;--panel:#101219;--muted:#1a2030;--text:#e6edf7;--sub:#9aa6bd;--accent:#60a5fa}
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  body{margin:0;background:var(--bg);color:var(--text);font:17px/1.4 -apple-system,system-ui,Segoe UI,Inter,Roboto,Arial}
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  header{display:flex;gap:10px;align-items:center;justify-content:space-between;position:sticky;top:0;background:linear-gradient(180deg,var(--bg),transparent);padding:8px 0 12px;z-index:5}
  h1{margin:0;font-size:22px;font-weight:800}
  .btn{font-size:16px;padding:10px 14px;border-radius:14px;border:1px solid #273244;background:#0f1522;color:#e6edf7;min-height:44px}
  .btn.primary{background:#0e172a;border-color:#1f2a44}
  .grid{display:grid;gap:12px}
  @media (min-width:900px){ .grid{grid-template-columns:1.2fr 1fr} }
  .card{background:var(--panel);border:1px solid #273244;border-radius:16px;box-shadow:0 8px 22px rgba(0,0,0,.18);overflow:hidden}
  .card h2{margin:0;padding:12px 14px;border-bottom:1px solid #222c3e;font-size:16px}
  .content{padding:12px 14px}
  .tabs{display:flex;gap:8px;overflow:auto;padding:0 2px 10px}
  .tab{padding:8px 12px;border:1px solid #2a3448;border-radius:12px;background:#171b24;color:#dbeafe;font-size:15px;min-height:40px;white-space:nowrap}
  .tab.active{background:#0e172a;border-color:#1f2a44}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .inp{display:flex;flex-direction:column;gap:6px;min-width:160px;flex:1}
  .inp input,.inp textarea{font-size:16px;padding:10px;border-radius:12px;border:1px solid #2a3448;background:#0b0f17;color:var(--text);min-height:42px}
  textarea{min-height:80px}
  .check{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid #2a3448;border-radius:12px;background:#0f121a;min-height:42px}
  .water{display:flex;gap:8px;flex-wrap:wrap}
  .cup{width:40px;height:40px;border-radius:10px;border:1px solid #2a3448;background:#0f1118;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer}
  .cup.on{background:#22d3ee33;border-color:#22d3ee}
  .muted{color:var(--sub);font-size:13px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>HFMP â€” Health Tracker</h1>
    <div class="row">
      <button class="btn" id="backupBtn">Backup</button>
      <button class="btn" id="restoreBtn">Restore</button>
      <button class="btn" id="resetBtn">Reset</button>
    </div>
  </header>

  <div class="tabs" id="tabs"></div>

  <div class="grid">
    <div class="col">
      <div class="card"><h2>Meals</h2><div class="content" id="meals"></div></div>

      <div class="card"><h2>Water</h2>
        <div class="content">
          <div class="muted">Tap cups (goal: 8)</div>
          <div class="water" id="waterRow"></div>
        </div>
      </div>

      <div class="card"><h2>Walking & Sleep</h2>
        <div class="content">
          <div class="row">
            <div class="inp"><label>Walking minutes</label><input id="wMin" type="number" min="0"></div>
            <div class="inp"><label>Steps (optional)</label><input id="wSteps" type="number" min="0"></div>
          </div>
          <div class="row">
            <div class="inp"><label>Bed</label><input id="sBed" type="time"></div>
            <div class="inp"><label>Wake</label><input id="sWake" type="time"></div>
            <div class="inp"><label>Hours</label><input id="sHours" type="number" step="0.1" placeholder="auto"></div>
          </div>
          <div class="row">
            <button class="btn" id="calcSleep">Calc hours</button>
            <button class="btn primary" id="saveWalkSleep">Save</button>
          </div>
        </div>
      </div>

      <div class="card"><h2>Notes</h2><div class="content"><textarea id="notes" placeholder="Energy, digestion, winsâ€¦"></textarea></div></div>
    </div>

    <div class="col">
      <div class="card"><h2>Fasting</h2>
        <div class="content">
          <div class="row">
            <button class="btn primary" id="startFast">Start</button>
            <button class="btn" id="stopFast">Stop</button>
          </div>
          <div class="row">
            <div class="inp"><label>Status</label><input id="fastStatus" disabled></div>
            <div class="inp"><label>Last fast (h)</label><input id="fastLast" disabled></div>
          </div>
        </div>
      </div>

      <div class="card"><h2>Metrics</h2>
        <div class="content">
          <div class="row">
            <div class="inp"><label>Weight (lb)</label><input id="mW" type="number" step="0.1"></div>
            <div class="inp"><label>Waist (in)</label><input id="mWa" type="number" step="0.1"></div>
          </div>
          <div class="row">
            <div class="inp"><label>Glucose AM</label><input id="gAM" type="number"></div>
            <div class="inp"><label>Glucose PM</label><input id="gPM" type="number"></div>
          </div>
          <div class="row"><button class="btn primary" id="saveMetrics">Save metrics</button></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const DAYS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
const MEALS=["Breakfast","Snack 1","Lunch","Snack 2","Dinner"];
const KEY="hfmp-app-v1";

function defaults(){
  const meals={}, water={}, walk={}, sleep={}, fast={}, metrics={};
  for(const d of DAYS){
    meals[d]={}; MEALS.forEach(m=>meals[d][m]={text:"",done:false});
    water[d]=0; walk[d]={min:null,steps:null}; sleep[d]={bed:"",wake:"",hours:null};
    fast[d]={logs:[],pending:null}; metrics[d]={w:null,wa:null,am:null,pm:null};
  }
  return {active:DAYS[0],meals,water,walk,sleep,fast,metrics,notes:""};
}
let S; try{ S=JSON.parse(localStorage.getItem(KEY)||""); }catch{ S=null }
if(!S) S=defaults();
function save(){ localStorage.setItem(KEY, JSON.stringify(S)); }

// Tabs
const tabs=document.getElementById('tabs');
function drawTabs(){ tabs.innerHTML=''; DAYS.forEach(d=>{ const b=document.createElement('button'); b.className='tab'+(S.active===d?' active':''); b.textContent=d; b.onclick=()=>{S.active=d; save(); render();}; tabs.appendChild(b); }); }

// Meals
const mealsEl=document.getElementById('meals');
function mealRow(label){
  const div=document.createElement('div'); div.className='check';
  const cb=document.createElement('input'); cb.type='checkbox'; cb.style.width='24px'; cb.style.height='24px'; cb.checked=S.meals[S.active][label].done;
  cb.onchange=()=>{ S.meals[S.active][label].done=cb.checked; save(); };
  const txt=document.createElement('textarea'); txt.placeholder=label+" planâ€¦"; txt.value=S.meals[S.active][label].text;
  txt.oninput=()=>{ S.meals[S.active][label].text=txt.value; save(); };
  div.appendChild(cb); div.appendChild(txt); return div;
}
function drawMeals(){ mealsEl.innerHTML=""; MEALS.forEach(m=>mealsEl.appendChild(mealRow(m))); }

// Water
const waterRow=document.getElementById('waterRow');
function drawWater(){ waterRow.innerHTML=""; const cups=S.water[S.active]||0; for(let i=1;i<=8;i++){ const c=document.createElement('div'); c.className='cup'+(i<=cups?' on':''); c.textContent='ðŸ’§'; c.onclick=()=>{ S.water[S.active]=(i===cups? cups-1: i); if(S.water[S.active]<0) S.water[S.active]=0; save(); drawWater(); }; waterRow.appendChild(c);} }

// Walking & Sleep
const wMin=document.getElementById('wMin'), wSteps=document.getElementById('wSteps');
const sBed=document.getElementById('sBed'), sWake=document.getElementById('sWake'), sHours=document.getElementById('sHours');
document.getElementById('calcSleep').onclick=()=>{ if(!sBed.value||!sWake.value) return alert('Set Bed & Wake'); const [bh,bm]=sBed.value.split(':').map(Number), [wh,wm]=sWake.value.split(':').map(Number); let a=bh*60+bm,b=wh*60+wm; if(b<=a) b+=1440; sHours.value=Math.round(((b-a)/60)*10)/10; };
document.getElementById('saveWalkSleep').onclick=()=>{ S.walk[S.active]={min:wMin.value?+wMin.value:null,steps:wSteps.value?+wSteps.value:null}; S.sleep[S.active]={bed:sBed.value||"",wake:sWake.value||"",hours:sHours.value?+sHours.value:null}; save(); alert('Saved.'); };

// Fasting
const fastStatus=document.getElementById('fastStatus'), fastLast=document.getElementById('fastLast');
document.getElementById('startFast').onclick=()=>{ const F=S.fast[S.active]; if(F.pending) return alert('Already fasting.'); F.pending=Date.now(); save(); drawFast(); };
document.getElementById('stopFast').onclick=()=>{ const F=S.fast[S.active]; if(!F.pending) return alert('Not fasting.'); const now=Date.now(); const hrs=Math.round(((now-F.pending)/3600000)*10)/10; F.pending=null; (F.logs=F.logs||[]).push(hrs); save(); drawFast(); };
function drawFast(){ const F=S.fast[S.active]; fastStatus.value = F.pending? 'Fastingâ€¦' : 'Idle'; const last=(F.logs||[]).slice(-1)[0]; fastLast.value
